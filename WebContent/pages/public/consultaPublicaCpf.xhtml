<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">




<ui:composition template="/pages/protected/templates/Layout.xhtml">
	<ui:define name="corpo">
		<h1>Consulta Pública</h1>
		<h:form id="form">
			<!--Ajax com status customizado -->
			<p:ajaxStatus onstart="statusDialog.show()"
				onsuccess="statusDialog.hide()" />
			<p:dialog modal="true" widgetVar="statusDialog" header="Status"
				draggable="false" closable="false">
				<h:graphicImage value="/resources/LoadingProgressBar.gif" />
			</p:dialog>

			<p:growl showDetail="true"></p:growl>



			<p:panel header="Tipo de Pessoa">
				<h:selectOneRadio id="cpf-cnpj"
					value="#{usuariosBean.campoBooleanControle}"
					title="Selecione qual tipo de Pessoa deseja inserir Jurídca ou Física.">
					<f:selectItem itemLabel="Jurídica" itemValue="#{true}" />
					<f:selectItem itemLabel="Física" itemValue="#{false}" />
					<p:ajax update="documento, CPF" event="change" />
				</h:selectOneRadio>
			</p:panel>




			<h:panelGrid columns="3" styleClass="columns">



				<h:outputLabel id="documento"
					value="#{usuariosBean.campoBooleanControle ? 'Cnpj' : 'Cpf'}" />




				<p:focus>


					<p:inputMask id="CPF" size="20" value="#{documentosBean.cpf_cnpj}"
						mask="#{usuariosBean.campoBooleanControle ? '99.999.999/9999-99' : '999.999.999-99'}"
						required="true"
						requiredMessage="Campo obrigatório não preenchido"
						title="#{usuariosBean.campoBooleanControle ? 'Informe o Cnpj.' : 'Informe o Cpf.'}">



					</p:inputMask>




				</p:focus>
				<p:commandButton value="Pesquisar" style="font-size:12px;width=40%"
					actionListener="#{documentosBean.ConsultaPublica}"
					update="gridDocumentos"></p:commandButton>
			</h:panelGrid>



			<p:dataTable value="#{documentosBean.documentos}" paginator="true"
				paginatorPosition="bottom" rows="10"
				paginatorTemplate="{CurrentPageReport} {RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
				rowsPerPageTemplate="3,5,10,15,20" var="documentos"
				id="gridDocumentos" widgetVar="tblDocumentos"
				emptyMessage="Nenhum registro encontrado">
				<f:facet name="header">
			  Lista de Documentos
			</f:facet>

				<!-- 
				<p:column style="font-size:10px;width=40%"
					sortBy="#{documentos.documento}">
					<f:facet name="header">
						<h:outputText value="Documento" />
					</f:facet>
					<h:outputText value="#{documentos.documento}" />
				</p:column>
 				-->
				<p:column style="font-size:10px;" sortBy="#{documentos.nota}"
					filterBy="#{documentos.nota}">


					<f:facet name="header">
						<h:outputText value="NF" />
					</f:facet>
					<h:outputText value="#{documentos.nota}">
						<f:convertNumber pattern="########0" minIntegerDigits="9" />
					</h:outputText>
				</p:column>

				<!-- 
				<p:column style="font-size:10px;" sortBy="#{documentos.emissao}">
					<f:facet name="header">
						<h:outputText value="Emissão" />
					</f:facet>
					<h:outputText value="#{documentos.emissao}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>

				</p:column>

				<p:column style="font-size:10px;" sortBy="#{documentos.embarque}">
					<f:facet name="header">
						<h:outputText value="Embarque" />
					</f:facet>
					<h:outputText value="#{documentos.embarque}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>

				<p:column style="font-size:10px;" sortBy="#{documentos.chegada}">
					<f:facet name="header">
						<h:outputText value="Chegada" />
					</f:facet>
					<h:outputText value="#{documentos.chegada}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>
				 -->


				<p:column style="font-size:10px;" sortBy="#{documentos.remetente}">
					<f:facet name="header">
						<h:outputText value="Remetente" />
					</f:facet>
					<h:outputText value="#{documentos.remetente}" />
				</p:column>

				<p:column style="font-size:10px;"
					sortBy="#{documentos.destinatario}">
					<f:facet name="header">
						<h:outputText value="Destinatário" />
					</f:facet>
					<h:outputText value="#{documentos.destinatario}" />
				</p:column>

				<p:column style="font-size:10px;" sortBy="#{documentos.entrega}">
					<f:facet name="header">
						<h:outputText value="Entrega" />
					</f:facet>
					<h:outputText value="#{documentos.entrega}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>


				<p:column style="font-size:10px;">
					<f:facet name="header">
						<h:outputText value="Ocorrência" />
					</f:facet>
					<h:outputText value="#{documentos.ocorrencia}" />
				</p:column>
			</p:dataTable>

		</h:form>

	</ui:define>

</ui:composition>
</html>