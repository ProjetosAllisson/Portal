<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="/pages/protected/templates/Layout.xhtml">
	<ui:define name="corpo">
		<h1>Extrato Duplicatas</h1>

		<h:form id="frm">


			<h:panelGrid columns="5">
				<h:outputLabel value="Data Inicial" for="txtDataInicio" />

				<p:calendar id="txtDataInicio" pattern="dd/MM/yyyy" locale="pt_BR"
					value="#{duplViewBean.filtro.dataInicio}" maxlength="10"
					style="font-size:12px;heigth=30"
					converterMessage="Data Invalida. Exemplo 01/01/2015">

				</p:calendar>

				<h:outputLabel value="Data Final" for="txtDataTermino" />

				<p:calendar id="txtDataTermino" pattern="dd/MM/yyyy" locale="pt_BR"
					value="#{duplViewBean.filtro.dataTermino}" maxlength="10"
					style="font-size:12px;width=130">
				</p:calendar>

				<p:commandButton value="Consultar"
					action="#{duplViewBean.pesquisar()}" update=":frm:gridDuplicatas" />


			</h:panelGrid>

			<br></br>

			<p:toolbar>
				<p:toolbarGroup>
					<p:commandLink id="excel" ajax="false">

						<p:graphicImage styleClass="semBorda" value="/img/excel.png"
							title="Exportar para Excel"></p:graphicImage>
						<pe:exporter type="xlsx" target="gridDuplicatas"
							fileName="Duplicatas" facetBackground="#BEBEBE" facetFontSize="8"
							facetFontColor="#FFFAFA" facetFontStyle="BOLD"
							fontName="Courier New" cellFontColor="#F0FFFF" cellFontSize="6"
							cellFontStyle="NORMAL" />

					</p:commandLink>

					<p:commandLink id="pdf" ajax="false">

						<p:graphicImage styleClass="semBorda"
							value="/img/adobe_pdf_document_01.png" title="Exportar para PDF"></p:graphicImage>

						<pe:exporter type="pdf" target="gridDuplicatas"
							fileName="Duplicatas" orientation="Landscape"
							facetBackground="#565656" facetFontSize="8"
							facetFontColor="#FFFAFA" facetFontStyle="BOLD"
							cellFontColor="#000000" cellFontSize="7" cellFontStyle="NORMAL" />

					</p:commandLink>
				</p:toolbarGroup>
			</p:toolbar>


			<p:dataTable id="gridDuplicatas" value="#{duplViewBean.lista}"
				var="duplicata" emptyMessage="Parabéns. Nenhum Título em Aberto.">

				<f:facet name="header">
			 			 Lista de Duplicatas Emitidas
				</f:facet>

				<p:column headerText="Fatura"
					style="text-align:center; max-width: 130px; min-width: 120px; overflow: hidden"
					styleClass="columns">
					<h:outputText
						value="#{duplicata.id.tipo_doc}-#{duplicata.id.fil_orig}-#{duplicata.id.fatura}/#{duplicata.id.ano}" />
				</p:column>

				<p:column headerText="Emissão Fatura"
					sortBy="#{duplicata.dt_fatura}" styleClass="columns">

					<h:outputText value="#{duplicata.dt_fatura.getTime()}">
						<f:convertDateTime pattern="dd/MM/yyyy" />

					</h:outputText>

				</p:column>

				<p:column headerText="Ctrc" styleClass="columns">
					<h:outputText value="#{duplicata.id.nr_cto}" />
				</p:column>

				<p:column headerText="Emissão CTRC" styleClass="columns">

					<h:outputText value="#{duplicata.dt_cte.getTime()}">
						<f:convertDateTime pattern="dd/MM/yyyy" />

					</h:outputText>

				</p:column>


				<p:column headerText="Tipo Frete" styleClass="columns">

					<h:outputText value="#{duplicata.tipo_frt}" />
				</p:column>


				<p:column headerText="Notas"
					style="max-width: 250px; min-width: 250px; overflow: hidden"
					styleClass="columns">

					<h:outputText value="#{duplicata.notas}" />
				</p:column>


				<p:column headerText="Cid. Dest"
					style="max-width: 150px; min-width: 150px; overflow: hidden"
					styleClass="columns">

					<h:outputText value="#{duplicata.cid_dest}" />
				</p:column>


				<p:column headerText="Uf. Dest" styleClass="columns">

					<h:outputText value="#{duplicata.uf_dest}" />
				</p:column>


				<p:column headerText="Ent. Cep"
					style="max-width: 80px; min-width: 80px; overflow: hidden"
					styleClass="columns">

					<h:outputText value="#{duplicata.ent_cep}" />
				</p:column>


				<p:column headerText="Valor Merc."
					style="max-width: 80px; min-width: 80px; overflow: hidden;"
					styleClass="columns">

					<h:outputText value="#{duplicata.vlr_merc}">

						<f:convertNumber type="currency" locale="pt_BR" />
					</h:outputText>
				</p:column>


				<p:column headerText="Peso" style="text-align: right"
					styleClass="columns_right">

					<h:outputText value="#{duplicata.peso}">
						<f:convertNumber minFractionDigits="3" />
					</h:outputText>
				</p:column>

				<p:column headerText="Peso cub." style="text-align: right"
					styleClass="columns_right">

					<h:outputText value="#{duplicata.peso_cub}">
						<f:convertNumber minFractionDigits="3" />
					</h:outputText>
				</p:column>

				<p:column headerText="Frete Peso" style="text-align: right"
					styleClass="columns_right">
					<h:outputText value="#{duplicata.frt_peso}">
						<f:convertNumber type="currency" locale="pt_BR" />
					</h:outputText>
				</p:column>

				<p:column headerText="Advalorem" style="text-align: right"
					styleClass="columns_right">
					<h:outputText value="#{duplicata.advalorem}">

						<f:convertNumber type="currency" locale="pt_BR" />
					</h:outputText>
				</p:column>

				<p:column headerText="Seguro"
					style="text-align: right; min-width:80px; max-width:120px"
					styleClass="columns">

					<h:outputText value="#{duplicata.vlr_seguro}">
						<f:convertNumber type="currency" locale="pt_BR" />
					</h:outputText>
				</p:column>

				<p:column headerText="Pedagio" style="text-align: right"
					styleClass="columns">

					<h:outputText value="#{duplicata.pedagio}">
						<f:convertNumber type="currency" locale="pt_BR" />
					</h:outputText>
				</p:column>

				<p:column headerText="Despacho" style="text-align: right"
					styleClass="columns">

					<h:outputText value="#{duplicata.despacho}">

						<f:convertNumber type="currency" locale="pt_BR" />
					</h:outputText>
				</p:column>

				<p:column headerText="TDE"
					style="text-align: right; min-width:30px; max-width:120px"
					styleClass="columns">

					<h:outputText value="#{duplicata.tx_dif_acesso}">

						<f:convertNumber type="currency" locale="pt_BR" />
					</h:outputText>
				</p:column>

				<p:column headerText="Outros"
					style="text-align: right; min-width:80px; max-width:120px"
					styleClass="columns">

					<h:outputText value="#{duplicata.outros}">

						<f:convertNumber type="currency" locale="pt_BR" />
					</h:outputText>
				</p:column>

				<p:column headerText="Total frete"
					style="text-align: right;min-width:80px; max-width:120px"
					styleClass="columns">

					<h:outputText value="#{duplicata.tot_frete}">

						<f:convertNumber type="currency" locale="pt_BR" />
					</h:outputText>
				</p:column>


			</p:dataTable>

		</h:form>



	</ui:define>
</ui:composition>
</html>